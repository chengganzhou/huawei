"use strict";$(".head").load("../pages/head.html"),$(".foot").load("../pages/foot.html");var id=getCookie("id");function render(e){var t=e.type1,o="",n=e.sale,i="",a=e.editor,s="",l=e.recommond,c="";$.each(t,function(e,t){o+='  <img src="'.concat(t,'" alt="">')}),$.each(n,function(e,t){i+="    <dl>\n    <dt>".concat(t.key,"</dt>\n    <dd>").concat(t.value,"</dd>\n</dl>")}),$.each(a,function(e,t){s+=" <span keys=style".concat(e+1,">").concat(t,"</span>")}),$.each(l,function(e,t){c+="<a>".concat(t,"</a>")}),$(".rollMain").html(o),$(".rollMain").find("img").eq(0).addClass("show"),$(".smallBox>img").prop("src",t[0]),$(".bigBox").css("background","#fff url(".concat(t[0],") no-repeat")),$(".contR>h2").html(e.name),$(".contR>a").html(e.activity),$(".contR>span").html(e.descript),$(".nowPrice").html(e.price),$(".midSpan").html(e.displayPrice),$(".displayMain").append(i),$(".code> span").html(e.code),$(".color").append('\n  <p><img src="'.concat(e.color[0],'" alt=""><span>').concat(e.color[1],"</span></p>\n  ")),$(".color").find("p").eq(0).addClass("activeP"),$(".editor").append(s),$(".editor").find("span").eq(0).addClass("activeEdi"),$(".recommend").append(c),$(".selGoods").find("span").eq(0).text($(".color span").eq(0).text()),$(".selGoods").find("span").eq(1).text($(".meal span").eq(0).text()),$(".selGoods").find("span").eq(2).text($(".editor span").eq(0).text())}function editor(e){$(".editor").on("click","span",function(){var o=$(this).attr("keys");$.each(e,function(e,t){if(e==o)return renderStyle(t),!1})})}function renderStyle(e){var t=e.type2,o="";e.editor2;$.each(t,function(e,t){o+='  <img src="'.concat(t,'" alt="">')}),$(".rollMain").html(""),$(".rollMain").html(o),$(".rollMain").find("img").eq(0).addClass("show"),$(".smallBox>img").prop("src",t[0]),$(".nowPrice").html(e.price2),$(".midSpan").html(e.displayPrice2),$(".code> span").html(e.code2),$(".contR>h2").html(e.name2),mouse(e),click(e)}$.ajax({url:"../data/listcont.json",type:"get",dataType:"json",success:function(e){for(var t,o=0;o<e.length;o++)e[o].id==id&&(render(t=e[o]),mouse(t),editor(t),click(t))}});var bigBox=document.querySelector(".bigBox"),smallBox=document.querySelector(".smallBox"),mask=document.querySelector(".mask");function mouse(o){$(".rollwrap").on("mouseenter","img",function(){$(this).addClass("show").siblings("img").removeClass("show");var e=new RegExp(/[0-9].png/g),t=$(this).prop("src").match(e)[0];$(".smallBox img").prop("src","../image/".concat(o.key).concat(t)),$(".bigBox")[0].style.background="#fff url(../image/".concat(o.key).concat(t,") no-repeat")})}function click(e){var t=0;$(".left").off("click"),$(".left").on("click",function(){$(".rollMain").find("img").length;--t<0&&(t=0),$(".rollwrap").animate({scrollLeft:65*t},200)}),$(".right").off("click"),$(".right").on("click",function(){var e=$(".rollMain").find("img").length;if(console.log(e),e-5<++t)return t--,!1;$(".rollwrap").animate({scrollLeft:65*t},200)})}$(".smallBox").mouseenter(function(e){$(this).find(".mask").css("display","block"),$(".bigBox").css("display","block"),$(".mask").mousemove(function(e){var t=e.clientX-$(".smallBox").offset().left-.5*$(".mask")[0].clientWidth,o=e.clientY-$(".smallBox").offset().top-.5*$(".mask")[0].clientHeight;t<=0&&(t=0),o<=0&&(o=0),t>=smallBox.clientWidth-mask.clientWidth&&(t=smallBox.clientWidth-mask.clientWidth),o>=smallBox.clientHeight-mask.clientHeight&&(o=smallBox.clientHeight-mask.clientHeight),$(this).css("left",t+"px"),$(this).css("top",o+"px"),bigBox.style.backgroundPositionX=-2*t+"px",bigBox.style.backgroundPositionY=-2*o+"px"})}),$(".smallBox").mouseleave(function(){$(this).find(".mask").css("display","none"),$(".bigBox").css("display","none")}),$(".detailPrice").mouseenter(function(){$(this).height("300px"),$(".reduce").find("dd").prop("display","block")}),$(".detailPrice").mouseleave(function(){$(this).height("237px")}),$(".color").on("click","p",function(){$(this).addClass("activeP").siblings("p").removeClass("activeP"),$(".selGoods").find("span").eq(0).text($(this).text())}),$(".meal").on("click","span",function(){$(this).addClass("activeSpan").siblings("span").removeClass("activeSpan"),$(".selGoods").find("span").eq(1).text($(this).text())}),$(".editor").on("click","span",function(){$(this).addClass("activeEdi").siblings("span").removeClass("activeEdi"),$(".selGoods").find("span").eq(2).text($(this).text())});